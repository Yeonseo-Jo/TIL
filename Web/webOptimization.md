**[📆 2023-06-24 TIL]**

<br/>

# 📍 웹 최적화

## ✔️ 웹 최적화는 무엇일까?

- 최고의 웹 성능을 구현하기 위해 최고의 조건을 만드는 다양한 노력을 의미한다.
- 웹 최적화 방법은 크게 세 가지로 구분된다.
  - (1) `프론트엔드 최적화` : 웹 UI/UX와 관련된 최적화로, 주로 HTML,JS, CSS, Image의 최적화를 진행한다. 콘텐츠를 다운로드, 로딩, 렌더링 할 때의 속도와 관련된 최적화이다.
  - (2) `백엔드 최적화` : 웹 서버, 웹 애플리케이션, 데이터베이스, DNS 서버 등을 최적화한다.
  - (3) `프로토콜 최적화` : HTTP 프로토콜 자체의 효과를 극대화하는 최적화. 웹 콘텐츠를 더 빠르게 용청하고 응답하도록 프로토콜을 업그레이드 하는 과정이다.

<br/>

## ✔️ 최적화가 필요한 이유는 무엇일까?

웹 최적화가 필요한 이유는 크게 두가지로 나누어 볼 수 있다.

- (1) 사용자 경험 측면 -> 렌더링 최적화 관련

  - 최근 웹 애플리케이션은 사용자의 다양한 요구사항을 처리하기 위해 ajax 통신, 복잡한 UI 등 많은 기능을 담으면서 크고 무거워졌다. 무거워진 웹은 긴 로딩 시간 함께 사용자 경험에 안 좋은 영향을 끼친다.

    <p align="center">

  ![image](https://user-images.githubusercontent.com/77691829/230554280-cdfd2098-e5bf-418b-9b5d-ccc1f79051de.png)

    </p>

  - 위 그래프에서 알 수 있듯이, 페이지 로딩 속도에 대한 이탈률을 보면 로딩 시간이 3초가 걸리면 32%, 5초면 90%, 6초면 106%, 10초면 123% 이다. 이처럼 로딩 속도는 사용자의 경험과 직결되므로 웹 최적화를 통해 렌더링 속도를 줄여 좋은 사용자 경험을 제공해야 할 필요가 있다.

  - 실제로 Pinterest는 긴 로딩 시간으로 인해 사용자가 페이지를 나가는 비율이 높았는데, 최적화를 통해 사용자 이탈률을 줄이고 매출은 40%로 증가시켰다고 한다.

<br/>

- (2) 수익 창출 측면 -> SEO 최적화 관련
  - 하드웨어가 용량설계를 최적화하여 비용 대비 효과를 얻어야 하는것과 비슷하게, 웹 사이트는 검색 엔진 최적화(Search Engine Optimization, SEO)를 실행하여 비용 대비 효과를 얻을 수 있다. 검색 엔진에 최적화 된다는 것은 다른 사이트에 비해 자주 상단에 노출되어 많은 방문자를 이끌어내므로, 결국 웹사이트 홍보 및 웹 사이트를 통한 수익 창출에 도움이 될것이고 이는 다시 말해 최적화를 통해 투입 대비 상당한 효과를 얻을수 있는 것을 의미한다.

<br/>

## ✔️ 웹 최적화를 위해 어떤 개발을 해야 할까?

성능 최적화란 웹페이지를 보는 데까지 걸린 시간, 즉 로딩 시간을 최적화하는 방법이다. 성능 최적화는 렌더링 최적화와 로딩 최적화로 나누어 볼 수 있다.

### (1) 렌더링 최적화

1. 웹 성능 측정 도구 사용

   - `크롬 개발자 도구` : 개발자 도구 > 네트워크 탭에서 **전체 HTTP 요청 수와 응답 수, 전달받은 각각의 콘텐츠 파일의 크기, DOMContentLoaded 시간, Load 시간, 로딩이 완료된 시점**을 확인 가능하다. 또한 **폭포차트**는 어떤 파일이 로딩 시 얼만큼 시간을 소모했는지 시각적으로 나타내주기 때문에 웹 사이트 로딩을 느리게 만드는 파일을 빠르게 판단 가능하다

   - `PageSpeed`: [PageSpeed](https://pagespeed.web.dev/)는 구글이 만든 웹 성능 요소 지표를 바탕으로 다양한 웹 성능 영역을 검출한다.

   - `WebPageTest` : [WebPageTest](https://www.webpagetest.org/)는 국내 웹 사이트 뿐만 아니라 세계 여러 위치에서 웹사이트 로딩 속도를 테스트할 수 있는 서비스이다. 일반적 테스트에서 세계 여러 위치에서 웹사이트 로딩 속도를 테스트 가능하다.

   - `Lighthouse` : [LightHouse](https://developer.chrome.com/docs/lighthouse/overview/)는 구글에서 개발한 웹페이지의 품질을 개선할 수 있는 오픈 소스 형태의 자동화 도구이다.

2. 렌더링 최적화 : 리플로우를 최대한 적게 발생시키면서 빠르게 화면을 그리고자 함

   - `CSS 최적화` :
     - **리플로우(레이아웃), 리페인트를 고려한 스타일 작성** -> 리플로우가 일어나면 브라우저가 전체 픽셀을 다시 계산해야 하기 때문에 리페인트 속성을 사용해 스타일을 작성하는 것이 좋다.
     - **사용하지 않는 css 제거**
     - **간결한 스타일 작성**
   - `html 최적화`
     - **인라인 스타일 사용 지양** : 인라인 스타일은 레이아웃 영향을 미치며 리플로우를 발생시키며 불필요한 코드 중복을 발생시킨다.
     - **복잡한 DOM 트리 지양** : 자식 요소가 많고 깊은 트리일수록 계산이 느리다.
   - `JS 최적화`
     - **강제 동기 레이아웃 피하기**
     - **레이아웃 스래싱 피하기**
   - `애니메이션 최적화`
     - 자바스크립트 api, 라이브러리보다 **css**를 통해 구현하기

### (2) 로딩 최적화

1. 렌더 블로킹 최적화

   - css는 **head**, js는 **body** 하단에서 불러온다
   - `media 속성 사용` : 조건별로 css를 불러올 수 있어 반응형 웹 제작 시 유용하게 사용될 수 있다.
   - `async/defer` : 스크립트 파일을 병렬로 다운로드 가능하다. 즉, 로딩 시 웹페이지 해석을 하지 않고 스크립트를 다운로드 가능하다
   - `이미지 최적화` :
     - `picture` 태그 사용하기 :
       - **type**속성을 사용해 사용자 환경에 맞는 이미지 제공 가능
       - **media** 속성을 사용해 브라우저 사이즈/해상도에 맞는 이미지 제공 가능
     - `img 지연로딩` 활용하기: **loading** 속성을 사용해 이미지를 브라우저 화면에 지연/병렬 로딩 가능하다
     - `스프라이트 이미지` 사용 : 여러개 이미지를 하나의 이미지로 만들어 사용한다
   - `웹팩(Webpack)` 사용 : 모듈 번들러 웹팩을 사용해 css와 js 파일을 하나의 파일로 묶어 리소스 요청을 줄일 수 있다
   - `Gzip 사용`: Gzip을 사용해 텍스트 기반의 리소스로 압축
   - `js 압축` : UglifyJs 등을 사용해 js 파일을 압축한다
   - `cdn 사용` : cdn은 유저에게 많은 콘텐츠를 손실 없이 빠르게 전달 가능하다
   - `캐싱` : 사용자가 요청하는 html,css,js,image를 첫 요청시에 내려 받은 뒤 특정 위치에 복사본을 저장 후, 이후 리소스 요청이 다시 왔을 때 저장된 복사본 파일을 사용해 더 빠르게 로딩 가능하다

<br/>
* 참고 자료들

- [이탈률/속도 측정 관련 자료](https://front-end.me/web/web-site-optimization/)

- [성능 최적화 관련 자료 1](https://ui.toast.com/fe-guide/ko_PERFORMANCE)

- [성능 최적화 관련 자료2](https://contents.premium.naver.com/codetree/funcoding/contents/220726012844062ac)

- [최적화 방법 총정리](https://velog.io/@hsecode/%EC%B5%9C%EC%A0%81%ED%99%94-%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95-5%EB%B6%84-%EC%99%84%EC%84%B1)

<br/>
<hr/>

## ☑️ TIL 한 줄 정리:

사용자 경험을 위해, SEO 최적화를 통한 수익 창출을 위해 웹 최적화는 필요하다. 웹 최적화를 위해서는 렌더링 혹은 로딩을 최적화하는 방법이 있다.
